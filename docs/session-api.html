<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AGISystem2 (UBH NL) Session API Specification</title>
    <link rel="stylesheet" href="site.css" />
    <script src="site-nav.js" defer></script>
  </head>
  <body>
    <header>
      <h1>AGISystem2 (UBH NL) Session API</h1>
      <p>Decoupling persistent theory from transient experimentation through a structured orchestration layer.</p>
      <nav class="main-nav">
        <a href="index.html">Home</a> · 
        <a href="architecture.html">Architecture</a> · 
        <a href="reasoning.html">Reasoning</a> · 
        <a href="theory/index.html">Theory</a> · 
        <a href="languages.html">Syntax</a> · 
        <a href="session-api.html">APIs</a> · 
        <a href="wiki/index.html">Wiki</a> · 
        <a href="gamp/metrics.html">Specs</a> · 
        <a href="vision/index.html">Vision</a>
      </nav>
    </header>
    <main>
      <div class="card">
        <div class="draft">DRAFT: architectural target; the API semantics are normative while implementation is ongoing.</div>

        <div class="nav">
          <a href="index.html">Docs Index</a>
          <a href="vision/index.html">Vision Home</a>
          <a href="languages.html">Lexicon/CNL/DSL</a>
          <a href="reasoning.html">Reasoning Strategy</a>
          <a href="examples.html">Examples</a>
          <a href="wiki/index.html">Wiki</a>
          <a href="theory/index.html">Theory Index</a>
        </div>

        <section>
          <h2>The Knowledge Duality: Persistent vs. Ephemeral</h2>
          <p>
            The UBHNL architecture manages knowledge through two distinct memory tiers. <strong>Persistent Theory Files</strong> (<code>*.sys2</code> and <code>*.cnl</code>) represent the long-term, authoritative axioms of a domain and are loaded deterministically from disk. In contrast, the <strong>Session</strong> acts as an ephemeral, short-term workspace. It allows for the addition of transient facts and the execution of hypothetical "what-if" queries without altering the foundational theory. This decoupling ensures that experimental deltas remain isolated, while the <strong>Orchestrator</strong> manages the planning and execution across both knowledge tiers.
          </p>
        </section>

        <section>
          <h2>Result Acceptance and Verification Contract</h2>
          <p>
            A cornerstone of the Session API is its strict <strong>Acceptance Contract</strong>. The system recognizes three primary result statuses, each requiring specific checkable evidence. A <strong>SAT (Satisfiable)</strong> status is only accepted if accompanied by a witness model that satisfies all constraints. An <strong>UNSAT (Unsatisfiable)</strong> or <strong>PROVED</strong> status must be supported by a checkable certificate (or confirmation via a trusted path). In cases where the reasoning cannot be completed within the resource budget or a certificate cannot be generated, the system returns <strong>UNKNOWN</strong>, providing audit metadata to explain the limitation.
          </p>
        </section>

        <section>
          <h2>Lifecycle Management: Load and Learn</h2>
          <p>
            The lifecycle of a reasoning task begins with the <strong>LoadTheoryFile</strong> operation, which integrates persistent axioms into the session environment. This process is governed by strict deterministic typing: every statement is parsed against the Lexicon, and an <strong>Origin ID</strong> is attached to record its source (path, line, and column). 
          </p>
          <p>
            Subsequently, the <strong>Learn</strong> operation allows for the injection of transient knowledge deltas. These interactive inputs update the session state and invalidate relevant caches but do not persist to disk. Like persistent statements, learned facts carry origin metadata, which is essential for conflict attribution and the generation of Unsat cores during the explanation phase.
          </p>
        </section>

        <section>
          <h2>Query Execution and Witness Attribution</h2>
          <p>
            The <strong>Query</strong> interface supports a diverse range of reasoning tasks, including satisfaction, formal proof, refutation, and optimization. For existential questions—such as "Which Cell has Protein P?"—the system performs a <strong>Witness Query</strong>. If successful, the result includes a <code>SAT</code> status and a set of <code>witnessAssignments</code>, mapping logical variables back to concrete domain elements. This provides a direct, verifiable answer to the user's question, grounded in the current state of the session.
          </p>
        </section>

        <section>
          <h2>The Explanation Layer: Attribution and Cores</h2>
          <p>
            Post-reasoning, the <strong>Explain</strong> operation provides the bridge back to human understanding. By analyzing the <strong>Origins</strong> of the statements involved in a proof or a contradiction, the system can synthesize an explanation in the user's preferred format (CNL or DSL). For unsatisfiable theories, this involves presenting the <strong>Unsat Core</strong>—the minimal subset of statements responsible for the conflict—ensuring that even the most complex logical failures are traceable back to their original source in the theory or the session delta.
          </p>
        </section>

        <div class="footer-links">
          <p>Full Specification: <a href="mdview.html?file=specs/DS/DS09-sessions-query-proof.md">DS-009: Session and Proof Management (MD)</a>.</p>
        </div>
        <footer class="site-footer">
          <hr />
          <p>Research conducted by <a href="https://www.axiologic.net">Axiologic Research</a> as part of the European research project <a href="https://www.achilles-project.eu/">Achilles</a>.</p>
          <p><strong>Disclaimer:</strong> This documentation was generated with AI assistance (LLMs) and may contain errors or hallucinations. The system is open source—verify claims by examining the code, evaluation suites, and automated tests.</p>
        </footer>
      </div>
    </main>
  </body>
</html>
