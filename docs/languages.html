<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>UBHNL — Lexicon, CNL, DSL</title>
    <link rel="stylesheet" href="site.css" />
      <script src="site-nav.js" defer></script>
  </head>
  <body>
    <header>
      <h1>Lexicon, CNL, and DSL</h1>
      <p>Deterministic, typed input with a strict vocabulary.</p>
    </header>
    <main>
      <div class="card">
        <div class="draft">DRAFT: target syntax and contracts; parsers are still in progress.</div>

        <div class="nav">
          <a href="index.html">Docs Index</a>
          <a href="vision.html">Vision</a>
          <a href="session-api.html">Session API</a>
          <a href="examples.html">Examples</a>
          <a href="wiki/index.html">Wiki</a>
          <a href="theory/index.html">Theory</a>
          <a href="mdview.html?file=specs/DS/DS05-cnl-lexicon.md">DS-005</a>
          <a href="mdview.html?file=specs/DS/DS08-dsl.md">DS-008</a>
        </div>

        <h2>1) Lexicon (the vocabulary)</h2>
        <p>
          The lexicon defines types (finite domains and/or builtins) and the allowed symbols. The rule is simple:
          every symbol used in CNL/DSL must be declared; otherwise it is a load error.
        </p>

        <h3>Format (sketch)</h3>
        <pre><code>{
  "builtins": {
    "Bool": { "kind": "builtin" },
    "Int": { "kind": "builtin" },
    "BV8": { "kind": "bitvector", "width": 8 }
  },
  "domains": {
    "Cell": ["c0", "c1"],
    "Person": ["p0"]
  },
  "constants": {
    "c0": "Cell",
    "c1": "Cell",
    "p0": "Person"
  },
  "predicates": {
    "geneA": { "arity": 1, "args": ["Cell"] },
    "proteinP": { "arity": 1, "args": ["Cell"] },
    "has_fever": { "arity": 1, "args": ["Person"] }
  },
  "aliases": {
    "protein p": "proteinP"
  }
}</code></pre>

        <h2>2) CNL (Controlled Natural Language)</h2>
        <p>
          CNL is “almost” natural language, but controlled: explicit quantifiers, explicit connectives, and clear scoping.
          Ambiguity is rejected, not guessed.
        </p>

        <h3>Examples</h3>
        <pre><code>for all cell c: if geneA(c) and not inhibitor(c) then proteinP(c)
exists person p: has_fever(p) and has_flu(p)</code></pre>

        <h3>Determinism rules</h3>
        <ul>
          <li>All quantifiers must include a domain: <code>for all x in Cell: ...</code> / <code>for all cell x: ...</code>.</li>
          <li>Unknown symbol (predicate/constant/domain) = error.</li>
          <li>Strict typing: predicate arity and argument types must match the lexicon.</li>
        </ul>

        <h2>3) DSL (authoring + canonical IR)</h2>
        <p>
          DSL is the “engineering” format: compact, easy to process, good for theory files, and reproducible.
          It is built on the <code>@ / $ / vocab</code> rule.
        </p>

        <h3>The @ / $ / vocab rule</h3>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Form</th><th>Meaning</th><th>Policy</th></tr></thead>
            <tbody>
              <tr>
                <td><code>@name</code></td>
                <td>the statement target (declaration / fact statement)</td>
                <td>at most one <code>@</code> per line; must be the first token</td>
              </tr>
              <tr>
                <td><code>$name</code></td>
                <td>a variable reference in scope (binder or previously defined)</td>
                <td>if it is not in scope → error</td>
              </tr>
              <tr>
                <td><code>name</code></td>
                <td>vocabulary lookup (lexicon + exported symbols)</td>
                <td>if it does not exist → error</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3>Statements</h3>
        <ul>
          <li><strong>Exported declaration</strong>: <code>@ion:Person</code> (becomes a vocabulary constant)</li>
          <li><strong>Fact statement</strong>: <code>@ion has_fever</code> (asserts <code>has_fever(ion)</code>)</li>
          <li><strong>Logical expressions</strong>: <code>forall $c in Cell: geneA($c) implies proteinP($c)</code> (asserts the expression)</li>
          <li><strong>Query holes</strong>: <code>exists ?c in Cell: proteinP(?c)</code></li>
        </ul>

        <h3>Typical errors (intentional)</h3>
        <pre><code># invalid: two @ tokens on the same line
@p0 likes @p1
# fix: p1 must be $p1 (variable) or a vocabulary constant (bare p1)

# invalid: unknown vocabulary symbol
@ion has_flu flu
# if "flu" is not declared as a Disease in the lexicon → load error</code></pre>

        <h2>Links (specs)</h2>
        <ul>
          <li><a href="mdview.html?file=specs/DS/DS05-cnl-lexicon.md">DS-005 CNL + Lexicon</a></li>
          <li><a href="mdview.html?file=specs/DS/DS08-dsl.md">DS-008 DSL</a></li>
          <li><a href="mdview.html?file=specs/tests/cnl-cases.md">CNL cases</a></li>
          <li><a href="mdview.html?file=specs/tests/dsl-cases.md">DSL cases</a></li>
        </ul>
      </div>
    </main>
  </body>
</html>
