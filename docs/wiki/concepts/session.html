<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Wiki: Session</title>
    <link rel="stylesheet" href="../../site.css" />
      <script src="../../site-nav.js" defer></script>
  </head>
  <body>
    <header>
      <h1>Session (short-term workspace)</h1>
      <p>The session is working memory: load theories (files) + transient learn + cache.</p>
    </header>
    <main>
      <div class="card">
        <div class="draft">DRAFT: Wiki page.</div>

        <div class="nav">
          <a href="../index.html">Wiki</a>
          <a href="../../session-api.html">Docs: Session API</a>
          <a href="origin.html">Origin</a>
          <a href="holes.html">Witness queries</a>
          <a href="../../mdview.html?file=specs/DS/DS09-sessions-query-proof.md">DS-009</a>
        </div>

        <h2>Mental model</h2>
        <ul>
          <li><strong>Theory files</strong> (long-term): <code>*.sys2</code>/<code>*.cnl</code> files on disk, loaded deterministically.</li>
          <li><strong>Session</strong> (short-term): an ephemeral workspace that can be recreated from files.</li>
          <li><strong>Cache</strong>: intermediate results (parsed IR, lowered fragments, incremental backend state).</li>
        </ul>

        <h2>Why a session exists (not “just run solve on a file”)</h2>
        <ul>
          <li><strong>Incrementality</strong>: repeated learn/query without full recompilation.</li>
          <li><strong>Orchestration</strong>: the session calls the orchestrator (plan DAG) and validates certificates.</li>
          <li><strong>Explainability</strong>: the session retains the link between constraints and origins (file/line).</li>
        </ul>

        <h2>Typical operations</h2>
        <pre><code>loadTheoryFile(path)
unloadTheoryFile(docId)
learn(input, origin?)
query(input, GoalKind, options?)
explain(result, style?)</code></pre>

        <h2>Engineering consequences</h2>
        <ul>
          <li>The session is where policies live: budgets, trust, “UNKNOWN vs accept”.</li>
          <li>The session must be reproducible: loading the same files (same digests) → the same meaning.</li>
        </ul>

        <h2>Relevant specs</h2>
        <ul>
          <li><a href="../../mdview.html?file=specs/DS/DS09-sessions-query-proof.md">DS-009</a> (full contract)</li>
          <li><a href="../../mdview.html?file=specs/DS/DS12-orchestrator-planner.md">DS-012</a> (planning + caching)</li>
        </ul>
      </div>
    </main>
  </body>
</html>
